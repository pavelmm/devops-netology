# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"

---
## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

### Ответ 1


Сделаем расчет ресурсов, объемы дисков взяты произвольными для примера.

| Ресурс      | Реплики    | ОЗУ, Гб | CPU  | Диск, Гб  | ОЗУ всего, Гб |  CPU всего   | Диск всего, Гб  |
| ----------- |:----------:|:-------:|:----:|:---------:|:-------------:|:------------:|:---------------:|
| База данных | 3          | 4       | 1    | 15        | 12            | 3            | 45              |
| Кэш         | 3          | 4       | 1    | 5         | 12            | 3            | 15              |
| Фронтэнд    | 5          | 0,05    | 0,2  | 5         | 0,25          | 1            | 25              |
| Бекэнд      | 10         | 0,6     | 1    | 5         | 6             | 10           | 50              |
| Всего       |            |         |      |           | 30,25         | 17           | 135             |

Для обеспечения отказоустойчивости нам потребуется две control ноды с конфигурацией каждой: CPU — 2 ядра, ОЗУ — 2 ГБ, диск — 50 ГБ  и 3 worker ноды, с конфигурацией каждой: CPU — 1 ядра, ОЗУ — 1 ГБ, диск — 100 ГБ.   
Итого требуемые ресурсы составят : СPU=2x2+1x3=7 ядер, RAM=2x2+1x3=7 Гб, HDD=50x2+100x3=400 Гб   
Запас для нагрузки возьмем 40 %.   
Рассчитаем общие требуемые ресурсы:   
CPU=1.4x17+7=30.8=31 ядро   
RAM=1.4x30.25+7=49.35=50 Гб   
HDD=1.4x135+400=589 Гб   

