# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

---
## Задание 1

Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя
платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой
осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы
выведите в мониторинг и почему?  

### Ответ 1

<details><summary></summary>

Оценка работоспособности ПО.
  - Количество HTTP/S запросов к приложению
  - Процент корректных ответов <400 кода
  - Доступность ПО из разных регионов
  - Количество успешно выданных запросов
  - Среднее время формирования запросов
  - Количество ошибок по отчетам

Доступность оборудования
  - CPU (загрузка ЦПУ)    
  - RAM (Количество занятой и оставшейся памяти)
  - HDD (Нагрузка на диск, свободное место, состояние диска, динамика заполняемости диска, изношенность дисков)
  - LAN (Объём сетевого трафика по интерфейсам)
  - ОЗУ (объем свободного ОЗУ)
  
 Бизнес мониторинг
  - Количество успешных процессов
  - Количество неудачных процессов
  - Количество выполняеых (в работе) процессов
  - Количество выполненых процессов  
  - Мониторинг среднего времени выполнения процессов

- Мониторинг безопасности ИС
  - Актуальность сертификатов
  - Неудачные авторизации  
  - Временное ограничения после нескольких неудачных авторизаций пользователя или ограничение входа из-за отсутствие на работе 1 месяц/ 2 недели (засисит от политик предприятия).
</details>

## Задание 2

Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал,
что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы
можете ему предложить?

### Ответ 2
<details><summary></summary>
Для того что бы привести метрики в понятный вид, нужно утвердить SLA в рамках, которого будут указаны SLO для тех метрик.
После этого менежджерам будет видна разница значений SLO и SLI.
Если значения SLI метрики не противоречат установленным для нее SLO тогда продукт в норме. Менеджер видит работоспособность продукта.

Дополню ответ.
  
- CPU – нагрузка процессора (задержки процесса и нагрузка приложения)
- inodes - загруженность файловое системы (нагрузка ПО на формирование отчетов)
- RAM -  загруженность оперативной памяти

Метрики берем из приложения или БД смотря, как все настроено.

Можно сделать метрики:
 - Время формирования отчета, можно разбить на несколько метрик: среднее, минимальное и максимальное время.
 - Доступность приложения по времени (отклик работоспособности)
 - Количество отчетов в которых есть ошибки - завершившихся неудачно (не выполненных)
 </details> 

## Задание 3

Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою  
очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации,  
чтобы разработчики получали ошибки приложения?  

### Ответ 3

Если ресурсы жестко ограничены, можно написать скрипты для проверки логов на наличие ошибок. Если они есть, грепать ошибки и информировать разработчиков, например на какую-нибудь общую почту или группу рассылки.
Если приложение более востребовано и можно найти место, то можно развернуть ПО типа Sentry и отправлять ошибки туда.

## Задание 4

Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов.  
Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше  
70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?  

### Ответ 4

В формуле из задания не используются значения кодов 1xx и 3xx

Правильный вариант формулы будет выглядеть так:  
SLI = (summ_1x_requests + summ_2x_requests + summ_3x_requests)/(summ_all_requests)  
